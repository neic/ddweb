{% extends 'base.html' %}
{% load thumbnail %}

{% block title %}News{% if year %} {{ year|date:"Y" }}{% endif %}{% endblock title %}

{% block js %}<script type="text/javascript">
  $(document).ready(function(){{% for article in articles %}{% if article.images.all %}
  $("#{{ article.headline|slugify }}-{{ article.date|slugify }}").yoxview({
  images: [{% for ArticleImage in article.images.all %}
    {% thumbnail ArticleImage.image '720' as sm %}
    { media: { src: '{{ sm.url }}', title: '{{ ArticleImage.caption }}' }},
    {% endthumbnail %}
  {% endfor %}
  ]});{% endif %}{% endfor %}
  });
</script>{% endblock js%}

{% block content %}
{% for article in articles %}
<div class="row">
  <div class="col-sm-12">
    <h3>{{ article.headline }}</h3>
  </div>
  <div class="col-sm-9 col-md-7">
    <h6> {{ article.date }}</h6>
    <p>{{ article.description }}</p>
  </div>
  <div class="col-sm-3 col-md-5 text-center">
    {% if article.images.all %}
    <a href="" id="{{ article.headline|slugify }}-{{ article.date|slugify }}">
      {% thumbnail article.images.all.0.image '400' as xs %}
      <img src="{{ xs.url }}" class="img-responsive center-block" alt="" />
      {% endthumbnail %}
    </a>
    {% else %}No image{% endif %}
  </div>
</div>
<hr/>
{% endfor %}
<p>
Previous news:
{% if previous_year %}
<a href="/news/{{ previous_year|date:"Y" }}">{{ previous_year|date:"Y" }}</a>
{% elif not year %}
<a href="/news/{{ date_list.last|date:"Y" }}">{{ date_list.last|date:"Y" }}</a>
{% else %}
None
{% endif %}
</p>
{% endblock content%}
